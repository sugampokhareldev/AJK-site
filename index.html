<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJK Cleaning Company | Professional Cleaning Services in Bischofsheim</title>
    
    <!-- Usercentrics CMP -->
    <script id="usercentrics-cmp" src="https://app.usercentrics.eu/browser-ui/latest/loader.js" data-settings-id="8b2vYJAM6JTPCf" async></script>

    <!-- 1. Critical Security & Performance Fixes -->
    <!-- Add DNS preconnect for critical domains -->
    <link rel="dns-prefetch" href="//maps.googleapis.com">
    <link rel="dns-prefetch" href="//generativelanguage.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- PERFORMANCE: Preload critical resources with high fetch priority -->
    <link rel="preload" as="image" href="https://images.unsplash.com/photo-1581578731548-c64695cc6952?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80" fetchpriority="high">

    <!-- 2. Enhanced Local SEO (German Market Focus) -->
    <meta name="description" content="AJK Cleaning Company: Professional residential & commercial cleaning services in Bischofsheim. Eco-friendly products, fully insured, satisfaction guaranteed. Free quotes!">
    <meta name="keywords" content="cleaning service, Bischofsheim, residential cleaning, commercial cleaning, eco-friendly cleaning, move-in cleaning, deep cleaning, office cleaning mainz, house cleaning wiesbaden">
    <meta name="author" content="AJK Cleaning Company">
    <meta name="robots" content="index, follow">
    <meta name="geo.region" content="DE-HE">
    <meta name="geo.placename" content="Bischofsheim">
    <meta name="geo.position" content="49.9939;8.3669">
    <!-- Add German language alternative -->
    <link rel="alternate" hreflang="de" href="https://www.ajkcleaning.com/de">
    <link rel="alternate" hreflang="en" href="https://www.ajkcleaning.com">
    <link rel="canonical" href="https://www.ajkcleaners.de">

    <!-- 10. Final SEO Checklist -->
    <!-- Add sitemap reference -->
    <link rel="sitemap" type="application/xml" href="/sitemap.xml">
    <!-- Add social media profiles -->
    <link rel="me" href="https://www.facebook.com/ajkcleaning">
    <link rel="me" href="https://www.instagram.com/ajkcleaning">
    <!-- Add search console verification -->
    <meta name="google-site-verification" content="YOUR_VERIFICATION_CODE">

    <!-- Social Media / Open Graph -->
    <meta property="og:title" content="AJK Cleaning Company | Professional Cleaning Services in Bischofsheim">
    <meta property="og:description" content="Top-rated, eco-friendly cleaning for homes and businesses in Bischofsheim. Get your free quote today!">
    <meta property="og:image" content="https://images.unsplash.com/photo-1581578731548-c64695cc6952?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80">
    <meta property="og:url" content="https://www.ajkcleaners.de">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="en_DE">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AJK Cleaning Company | Professional Cleaning Services">
    <meta name="twitter:description" content="Top-rated, eco-friendly cleaning for homes and businesses in Bischofsheim. Get your free quote today!">
    <meta name="twitter:image" content="https://images.unsplash.com/photo-1581578731548-c64695cc6952?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="images/logo.jpg">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" xintegrity="sha512-Avb2QiuDEEvB4bZJYdft2mNjVShBftLdPG8FJ0V7irTLQ8Uo0qcPxh4Plq7G5tGm0rU+1SPhVotteLpBERwTkw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <style>
        :root{--primary:#1e40af;--primary-dark:#1e3a8a;--secondary:#059669;--secondary-dark:#047857}
        *{scroll-behavior:smooth;box-sizing:border-box}
        body{font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;line-height:1.6;color:#374151}
        .navbar-scrolled{box-shadow:0 4px 18px rgba(0,0,0,.1);backdrop-filter:blur(12px);background:hsla(0,0%,100%,.97)}
        .nav-link{position:relative;padding:.5rem 0;transition:all .3s ease;font-weight:500}
        .nav-link::after{content:'';position:absolute;width:0;height:2px;bottom:0;left:0;background-color:var(--primary);transition:width .3s ease}
        .nav-link:hover::after,.nav-link.active::after{width:100%}
        .mobile-menu{transition:all .4s cubic-bezier(.68,-.55,.27,1.55);transform-origin:top;opacity:0;transform:scaleY(0) translateY(-20px);display:none}
        .mobile-menu.open{display:flex;opacity:1;transform:scaleY(1) translateY(0)}
        .cta-button{position:relative;overflow:hidden;transition:all .3s ease;z-index:1}
        .cta-button::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,hsla(0,0%,100%,.2),transparent);transition:all .6s ease;z-index:-1}
        .cta-button:hover::before{left:100%}
        .menu-line{transition:all .3s ease}
        .menu-open .menu-line:nth-child(1){transform:rotate(45deg) translate(6px,6px)}
        .menu-open .menu-line:nth-child(2){opacity:0}
        .menu-open .menu-line:nth-child(3){transform:rotate(-45deg) translate(6px,-6px)}
        .hero-overlay{background:linear-gradient(135deg,rgba(10,25,47,.7),rgba(10,25,47,.5))}
        .service-card,.trust-point,.faq-item{contain:layout style}
        .service-card{transition:all .4s cubic-bezier(.175,.885,.32,1.275);overflow:hidden}
        .service-card:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 20px 40px rgba(0,0,0,.1)}
        .form-input:invalid{border-color:#f87171}
        .form-input:valid{border-color:#34d399}
        @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
        .animate-fade-in-up{animation:fadeInUp .8s ease-out forwards; opacity: 0;}
        .trust-point{background:#f8fafc;border-left:4px solid var(--primary);transition:all .3s ease}
        .trust-point:hover{background:#f1f5f9;transform:translateX(5px)}
        .skip-link{position:absolute;top:-40px;left:6px;background:#000;color:#fff;padding:8px;z-index:10000;text-decoration:none}
        .skip-link:focus{top:6px}
        @media (prefers-reduced-motion:reduce){*{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important}}
        a:focus-visible,button:focus-visible,input:focus-visible,textarea:focus-visible,select:focus-visible{outline:2px solid var(--primary);outline-offset:2px}
        .text-blue-200{color:#bfdbfe}
        .sticky-cta{padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom);z-index:50}
        .hero-image{background-image:url(https://images.unsplash.com/photo-1581578731548-c64695cc6952?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80);background-size:cover;background-position:center;background-attachment:scroll}
        @media (min-width: 1024px) { .hero-image { background-attachment: fixed; } }
        .faq-question{cursor:pointer}
        .faq-answer{max-height:0;overflow:hidden;transition:max-height .5s ease-in-out; contain: content;}
        .faq-item.open .faq-answer{max-height:300px}
        .faq-item.open .faq-icon{transform:rotate(180deg)}
        .faq-icon{transition:transform .3s ease}
        .chat-widget-enhanced{position:fixed;bottom:20px;right:20px;z-index:1000;font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif}
        .chat-toggle{position:relative;width:60px;height:60px;background:#1e40af;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.15);transition:all .3s ease;color:#fff}
        .chat-toggle:hover{background:#1e3a8a;transform:scale(1.05)}
        .unread-badge{position:absolute;top:-5px;right:-5px;background:#ef4444;color:#fff;border-radius:50%;min-width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;border:2px solid #fff}
        .chat-window{position:absolute;bottom:75px;right:0;width:350px;height:450px;background:#fff;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,.2);overflow:hidden;display:flex;flex-direction:column;transform:translateY(20px) scale(.9);opacity:0;transition:all .3s cubic-bezier(.68,-.55,.265,1.55);display:none}
        .chat-window.open{transform:translateY(0) scale(1);opacity:1;display:flex}
        .chat-header{background:#1e40af;color:#fff;padding:15px;display:flex;justify-content:space-between;align-items:center}
        .chat-header h3{margin:0;font-size:16px;font-weight:600}
        .chat-status{font-size:12px;opacity:.9; display: flex; align-items: center; gap: 6px;}
        .chat-status::before { content: ''; display: block; width: 8px; height: 8px; background-color: #34d399; border-radius: 50%;}
        .chat-header-actions{display:flex;gap:5px}
        .chat-action-btn, .minimize-btn, .close-btn { background: hsla(0,0%,100%,.2); border: none; color: #fff; width: 28px; height: 28px; border-radius: 4px; cursor: pointer; font-size: 16px; display: flex; align-items: center; justify-content: center; transition: background .2s; }
        .chat-action-btn:hover, .minimize-btn:hover, .close-btn:hover { background: hsla(0,0%,100%,.3); }
        .chat-action-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .chat-messages{flex:1;padding:15px;overflow-y:auto;background:#f8fafc}
        .message{margin-bottom:15px;animation:messageSlide .3s ease-out}
        @keyframes messageSlide{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
        .message-content{max-width:85%;padding:10px 15px;border-radius:18px;word-wrap:break-word;line-height:1.4}
        .user-message .message-content{background:#1e40af;color:#fff;margin-left:auto;border-bottom-right-radius:4px}
        .admin-message .message-content{background:#fff;color:#374151;border:1px solid #e5e7eb;border-bottom-left-radius:4px}
        .system-message .message-content{background:#f3f4f6;color:#6b7280;margin:0 auto;text-align:center;border-radius:12px;font-size:14px; font-style: italic;}
        .message-time{font-size:11px;color:#9ca3af;margin-top:5px;text-align:right}
        .user-message .message-time{text-align:right}
        .admin-message .message-time{text-align:left}
        .typing-indicator{padding:15px;background:#fff;border-top:1px solid #e5e7eb;display:flex;align-items:center;gap:10px;display:none}
        .typing-dots{display:flex;gap:3px}
        .typing-dots span{width:6px;height:6px;border-radius:50%;background:#9ca3af;animation:typingDot 1.4s infinite ease-in-out}
        .typing-dots span:nth-child(1){animation-delay:-.32s}
        .typing-dots span:nth-child(2){animation-delay:-.16s}
        @keyframes typingDot{0%,80%,100%{transform:scale(0);opacity:.5}40%{transform:scale(1);opacity:1}}
        .typing-text{font-size:12px;color:#6b7280}
        .chat-input-container{background:#fff;border-top:1px solid #e5e7eb}
        .user-info{padding:15px;display:flex;flex-direction:column;gap:10px;display:none}
        .user-info input{border:1px solid #d1d5db;border-radius:8px;padding:8px 12px;font-size:14px}
        .user-info input:focus{outline:none;border-color:#1e40af;box-shadow:0 0 0 3px rgba(30,64,175,.1)}
        .user-info button{background:#1e40af;color:#fff;border:none;border-radius:8px;padding:10px;cursor:pointer;font-weight:600;transition:background .2s}
        .user-info button:hover{background:#1e3a8a}
        .chat-input-area{display:flex;padding:15px;gap:10px;align-items:flex-end}
        #chat-input-enhanced{flex:1;border:1px solid #d1d5db;border-radius:20px;padding:10px 15px;font-size:14px;resize:none;max-height:100px;min-height:40px}
        #chat-input-enhanced:focus{outline:none;border-color:#1e40af;box-shadow:0 0 0 3px rgba(30,64,175,.1)}
        #chat-send-enhanced{background:#1e40af;color:#fff;border:none;border-radius:50%;width:40px;height:40px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}
        #chat-send-enhanced:hover:not(:disabled){background:#1e3a8a;transform:scale(1.05)}
        #chat-send-enhanced:disabled{background:#9ca3af;cursor:not-allowed;transform:none}
        @media (max-width:768px){.chat-widget-enhanced{bottom:90px!important;right:15px;z-index:60}.chat-window{width:calc(100vw - 30px)!important;right:-15px!important;height:400px;bottom:75px!important}.chat-toggle{width:55px;height:55px}}
        .chat-messages::-webkit-scrollbar{width:6px}
        .chat-messages::-webkit-scrollbar-track{background:#f1f5f9}
        .chat-messages::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}
        .chat-messages::-webkit-scrollbar-thumb:hover{background:#94a3b8}
        #checklist-modal { transition: opacity 0.3s ease; }
        #checklist-modal-content { transition: transform 0.3s ease; }
        #checklist-modal-content h3 { font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem; color: var(--primary); }
        #checklist-modal-content ul { list-style-type: disc; margin-left: 1.5rem; }
        #checklist-modal-content li { margin-bottom: 0.5rem; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid var(--primary); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        #tip-result-container { transition: opacity 0.3s ease; }
        .prose h3, .prose h4 { margin-bottom: 0.5em !important; margin-top: 1em !important; color: var(--primary); }
        .prose ul { padding-left: 1.5em !important; margin-top: 0.5em !important;}
        .admin-message .message-content a { text-decoration: underline; }
        .admin-message .message-content a:hover { color: var(--primary-dark); }
        
        /* IMPRESSIVE Language Switcher Styles */
        .lang-switcher {
            position: relative;
            display: flex;
            align-items: center;
            background-color: #f1f5f9; /* light grey background */
            border-radius: 9999px; /* pill shape */
            padding: 4px;
        }
        .lang-option {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 6px;
            border-radius: 9999px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background-color: transparent;
        }
        .lang-option svg {
            width: 24px;
            height: 18px;
            border-radius: 3px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .lang-option:hover {
            background-color: #e2e8f0; /* slightly darker grey on hover */
        }
        .lang-option.active {
            background-color: #ffffff;
            border-color: var(--primary);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transform: scale(1.05);
        }
        
        /* 9. Mobile-Specific Optimizations */
        @media (max-width: 768px) {
            .sticky-cta a {
                min-height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .service-card {
                margin: 0.5rem;
            }
            /* Prevent zoom on input focus for iOS */
            input, select, textarea {
                font-size: 16px !important; /* Prevents zoom on focus */
            }
        }
        /* Testimonial card style */
        .testimonial-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .testimonial-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .stars .fa-star {
            color: #f59e0b; /* amber-500 */
        }

        /* Before/After Gallery */
        .gallery-container {
            display: grid;
            gap: 1rem;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }
        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        .gallery-item:hover img {
            transform: scale(1.05);
        }
        .gallery-label {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 0.75rem;
            text-align: center;
            font-weight: 600;
            transition: opacity 0.3s ease;
        }
        
        /* Calculator Slider styles */
        input[type=range] {
            -webkit-appearance: none; /* FIX: Added vendor prefix */
            appearance: none; /* Added standard property for compatibility */
            width: 100%;
            background: transparent;
        }

        input[type=range]:focus {
            outline: none;
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 8px;
            cursor: pointer;
            background: #d1d5db;
            border-radius: 5px;
        }

        input[type=range]::-webkit-slider-thumb {
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            -webkit-appearance: none;
            margin-top: -6px;
        }

        input[type=range]:focus::-webkit-slider-runnable-track {
            background: #9ca3af;
        }

    </style>

    <!-- 6. Enhanced Analytics & Tracking -->
    <!-- FIX: Google Consent Mode v2 Default Settings -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('consent', 'default', {
            'analytics_storage': 'denied',
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'wait_for_update': 500
        });
    </script>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-062LYMWJKZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-062LYMWJKZ');
    </script>

    <!-- JSON-LD Schema for Local Business -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "CleaningService",
        "name": "AJK Cleaning Company",
        "description": "Professional residential & commercial cleaning services in Bischofsheim. Eco-friendly products, fully insured, satisfaction guaranteed.",
        "url": "https://www.ajkcleaners.de",
        "logo": "https://www.ajkcleaners.de/images/logo.jpg",
        "image": "https://images.unsplash.com/photo-1581578731548-c64695cc6952?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80",
        "telephone": "+4917661852286",
        "email": "info@ajkcleaning.com",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "Bahnhofstraße 5",
            "addressLocality": "Bischofsheim",
            "postalCode": "65474",
            "addressCountry": "DE"
        },
        "geo": {
            "@type": "GeoCoordinates",
            "latitude": 49.9939,
            "longitude": 8.3669
        },
        "openingHoursSpecification": [{
            "@type": "OpeningHoursSpecification",
            "dayOfWeek": ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
            "opens": "08:00",
            "closes": "18:00"
        }],
        "areaServed": {
            "@type": "GeoCircle",
            "geoMidpoint": { "@type": "GeoCoordinates", "latitude": 49.9939, "longitude": 8.3669 },
            "geoRadius": "25000"
        },
        "priceRange": "€€",
        "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "Cleaning Services",
            "itemListElement": [
                {"@type": "Offer","itemOffered": {"@type": "Service","name": "Residential Cleaning"}},
                {"@type": "Offer","itemOffered": {"@type": "Service","name": "Commercial Cleaning"}},
                {"@type": "Offer","itemOffered": {"@type": "Service","name": "Deep Cleaning"}},
                {"@type": "Offer","itemOffered": {"@type": "Service","name": "Move-In/Move-Out Cleaning"}}
            ]
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.9",
            "reviewCount": "58"
        }
    }
    </script>
</head>
<body class="font-sans text-gray-800 antialiased">
    <!-- ACCESSIBILITY: Skip to main content link -->
    <a href="#main-content" class="skip-link" data-translate="skipLink">Skip to main content</a>

    <!-- Enhanced Navbar -->
    <header id="navbar" class="fixed w-full bg-white/90 z-50 transition-all duration-500 py-3">
        <div class="container mx-auto flex justify-between items-center px-6">
            <a href="#home" class="flex items-center space-x-3" aria-label="AJK Cleaning Company Home">
                <img src="images/logo.jpg" alt="AJK Cleaning Company Logo" class="h-16 w-16 sm:h-20 sm:w-20 rounded-lg logo transition-transform duration-300 object-contain" width="80" height="80" loading="eager">
                <span class="font-bold text-lg sm:text-xl text-primary transition-all duration-300" data-translate="companyName">AJK Cleaning Company</span>
            </a>
            
            <nav class="hidden md:flex space-x-8 items-center" aria-label="Main navigation">
                <a href="#home" class="nav-link text-gray-700 hover:text-primary font-medium active" aria-current="page" data-translate="navHome">Home</a>
                <a href="#services" class="nav-link text-gray-700 hover:text-primary font-medium" data-translate="navServices">Services</a>
                <a href="#about" class="nav-link text-gray-700 hover:text-primary font-medium" data-translate="navAbout">About</a>
                <a href="#testimonials" class="nav-link text-gray-700 hover:text-primary font-medium">Testimonials</a>
                <a href="#faq" class="nav-link text-gray-700 hover:text-primary font-medium" data-translate="navFaq">FAQ</a>
                <a href="#contact" class="nav-link text-gray-700 hover:text-primary font-medium" data-translate="navContact">Contact</a>
                <a href="#contact" class="cta-button bg-gradient-to-r from-primary to-primary-dark text-white px-5 py-2.5 rounded-lg shadow-md hover:shadow-lg hover:from-primary-dark hover:to-primary-dark transition-all duration-300 font-semibold" data-translate="navQuote">GET A FREE QUOTE</a>
                <div class="lang-switcher ml-4">
                    <button data-lang="en" class="lang-option active" title="Switch to English" aria-label="Switch to English">
                        <svg viewBox="0 0 60 30" xmlns="http://www.w3.org/2000/svg"><clipPath id="a"><path d="m30 15h30v15zm0 0v15h-30zm0 0h-30v-15zm0 0v-15h30z"/></clipPath><path d="m0 0v30h60v-30z" fill="#012169"/><path d="m0 0 60 30m-60 0 60-30" stroke="#fff" stroke-width="6"/><path d="m0 0 60 30m-60 0 60-30" stroke="#c8102e" stroke-width="4" clip-path="url(#a)"/><path d="m30 0v30m-30-15h60" stroke="#fff" stroke-width="10"/><path d="m30 0v30m-30-15h60" stroke="#c8102e" stroke-width="6"/></svg>
                    </button>
                    <button data-lang="de" class="lang-option" title="Switch to German" aria-label="Switch to German">
                        <svg viewBox="0 0 5 3" xmlns="http://www.w3.org/2000/svg"><path d="m0 0h5v3h-5z"/><path d="m0 1h5v2h-5z" fill="#d00"/><path d="m0 2h5v1h-5z" fill="#ffce00"/></svg>
                    </button>
                </div>
            </nav>
            
            <!-- Mobile controls wrapper -->
            <div class="flex items-center md:hidden">
                <div class="lang-switcher mr-2">
                    <button data-lang="en" class="lang-option active" title="Switch to English" aria-label="Switch to English">
                        <svg viewBox="0 0 60 30" xmlns="http://www.w3.org/2000/svg"><clipPath id="a-mobile-header"><path d="m30 15h30v15zm0 0v15h-30zm0 0h-30v-15zm0 0v-15h30z"/></clipPath><path d="m0 0v30h60v-30z" fill="#012169"/><path d="m0 0 60 30m-60 0 60-30" stroke="#fff" stroke-width="6"/><path d="m0 0 60 30m-60 0 60-30" stroke="#c8102e" stroke-width="4" clip-path="url(#a-mobile-header)"/><path d="m30 0v30m-30-15h60" stroke="#fff" stroke-width="10"/><path d="m30 0v30m-30-15h60" stroke="#c8102e" stroke-width="6"/></svg>
                    </button>
                    <button data-lang="de" class="lang-option" title="Switch to German" aria-label="Switch to German">
                        <svg viewBox="0 0 5 3" xmlns="http://www.w3.org/2000/svg"><path d="m0 0h5v3h-5z"/><path d="m0 1h5v2h-5z" fill="#d00"/><path d="m0 2h5v1h-5z" fill="#ffce00"/></svg>
                    </button>
                </div>
                <button id="menu-btn" type="button" class="flex flex-col w-8 h-8 justify-center items-center space-y-1.5 focus:outline-none" aria-label="Toggle menu" aria-expanded="false" aria-controls="mobile-menu">
                    <span class="menu-line block w-6 h-0.5 bg-primary"></span>
                    <span class="menu-line block w-6 h-0.5 bg-primary"></span>
                    <span class="menu-line block w-6 h-0.5 bg-primary"></span>
                </button>
            </div>
        </div>
        
        <div id="mobile-menu" class="mobile-menu flex-col bg-white px-6 pb-6 space-y-3 md:hidden border-t shadow-lg" aria-hidden="true">
            <a href="#home" class="block py-3 px-4 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-primary transition-colors duration-300 font-medium active" aria-current="page" data-translate="navHome">Home</a>
            <a href="#services" class="block py-3 px-4 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-primary transition-colors duration-300 font-medium" data-translate="navServices">Services</a>
            <a href="#about" class="block py-3 px-4 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-primary transition-colors duration-300 font-medium" data-translate="navAbout">About</a>
            <a href="#testimonials" class="block py-3 px-4 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-primary transition-colors duration-300 font-medium">Testimonials</a>
            <a href="#faq" class="block py-3 px-4 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-primary transition-colors duration-300 font-medium" data-translate="navFaq">FAQ</a>
            <a href="#contact" class="block py-3 px-4 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-primary transition-colors duration-300 font-medium" data-translate="navContact">Contact</a>
            <a href="#contact" class="cta-button block bg-gradient-to-r from-primary to-primary-dark text-white px-4 py-3 rounded-lg text-center hover:shadow-md transition-colors duration-300 mt-2 font-semibold" data-translate="navQuote">GET A FREE QUOTE</a>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="home" class="relative min-h-screen flex items-center justify-center text-center text-white pt-16 hero-image" role="banner" aria-labelledby="hero-heading">
            <div class="hero-overlay absolute inset-0"></div>
            <div id="main-content" class="relative z-10 max-w-4xl px-6 animate-fade-in-up">
                <h1 id="hero-heading" class="text-4xl sm:text-5xl md:text-6xl font-bold mb-4 leading-tight" data-translate="heroTitle">Experience the AJK Standard of Clean in Bischofsheim</h1>
                <p class="mb-8 text-lg md:text-xl" data-translate="heroSubtitle">Fully insured, eco-friendly products, and satisfaction guaranteed. Serving Bischofsheim, Mainz, Wiesbaden & surrounding areas.</p>
                <!-- Urgency Element -->
                <div class="mb-6 bg-white/20 backdrop-blur-sm p-2 rounded-lg inline-block text-white font-semibold">
                    Next available slot: <span class="font-bold text-yellow-300">This Friday!</span>
                </div>
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <a href="#contact" class="bg-primary text-white px-6 py-3 rounded-lg shadow hover:bg-primary-dark transition-colors duration-300 font-semibold" data-translate="heroBtnBook">Book a Cleaning</a>
                    <a href="#services" class="bg-transparent border-2 border-white text-white px-6 py-3 rounded-lg shadow hover:bg-white hover:text-primary transition-colors duration-300 font-semibold" data-translate="heroBtnServices">Our Services</a>
                </div>
            </div>
            <a href="#offer" class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce" aria-label="Scroll to next section">
                <i class="fas fa-chevron-down text-2xl text-white"></i>
            </a>
        </section>

        <!-- Seasonal Offer Banner -->
        <section id="offer" class="bg-secondary text-white py-4 text-center">
            <div class="container mx-auto px-6">
                <p class="font-semibold text-lg animate-fade-in-up">
                    <i class="fas fa-tag mr-2"></i> Limited Time Offer: Get 15% Off Your First Cleaning! <a href="#contact" class="underline hover:text-yellow-300 ml-2">Claim Offer</a>
                </p>
            </div>
        </section>


        <!-- Trust Badges Section -->
        <section id="trust" class="py-12 bg-white">
            <div class="container mx-auto px-6 text-center">
                 <h2 class="text-2xl font-bold text-primary mb-8 animate-fade-in-up">Trusted By Your Neighbors & Fully Certified</h2>
                <div class="grid grid-cols-2 md:grid-cols-5 gap-8 items-center">
                    <div class="flex flex-col items-center text-gray-700 animate-fade-in-up" style="animation-delay: 0.1s;">
                        <i class="fas fa-shield-alt text-4xl text-primary mb-2"></i>
                        <span class="font-semibold" data-translate="trustInsured">Insured & Bonded</span>
                    </div>
                    <div class="flex flex-col items-center text-gray-700 animate-fade-in-up" style="animation-delay: 0.2s;">
                        <i class="fas fa-leaf text-4xl text-secondary mb-2"></i>
                        <span class="font-semibold" data-translate="trustEco">Eco-Friendly</span>
                    </div>
                    <div class="flex flex-col items-center text-gray-700 animate-fade-in-up" style="animation-delay: 0.3s;">
                        <i class="fas fa-star text-4xl text-yellow-400 mb-2"></i>
                        <span class="font-semibold" data-translate="trustRated">5-Star Rated</span>
                    </div>
                    <div class="flex flex-col items-center text-gray-700 animate-fade-in-up" style="animation-delay: 0.4s;">
                        <i class="fas fa-thumbs-up text-4xl text-primary mb-2"></i>
                        <span class="font-semibold" data-translate="trustGuaranteed">Satisfaction Guaranteed</span>
                    </div>
                    <div class="flex flex-col items-center text-gray-700 animate-fade-in-up" style="animation-delay: 0.5s;">
                         <img src="https://placehold.co/120x50/ffffff/374151?text=Insurer+Logo" alt="Insurance Partner Logo" class="h-12 grayscale opacity-75 hover:grayscale-0 hover:opacity-100 transition-all">
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Services Section -->
        <section id="services" class="py-16 bg-gray-50" aria-labelledby="services-heading">
            <div class="container mx-auto px-6 text-center">
                <h2 id="services-heading" class="text-3xl font-bold text-primary mb-4 animate-fade-in-up" data-translate="servicesTitle">Our Premium Cleaning Services</h2>
                <p class="text-gray-600 max-w-2xl mx-auto mb-12 animate-fade-in-up" style="animation-delay: 0.2s;" data-translate="servicesSubtitle">We offer a wide range of cleaning services tailored to meet your specific needs and exceed your expectations in Bischofsheim and surrounding areas.</p>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <article class="service-card bg-white p-6 rounded-xl shadow-md relative animate-fade-in-up flex flex-col justify-between" style="animation-delay: 0.3s;">
                        <div>
                            <div class="bg-gradient-to-br from-blue-100 to-blue-200 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4" aria-hidden="true"><i class="fas fa-home text-primary text-2xl"></i></div>
                            <h3 class="font-bold text-lg mb-2" data-translate="service1Title">Residential Cleaning</h3>
                            <p class="text-sm text-gray-600 mb-4" data-translate="service1Desc">Keep your home spotless with our detailed cleaning services.</p>
                        </div>
                        <div class="mt-4">
                             <a href="#contact" class="text-primary hover:underline font-medium inline-flex items-center mb-3" data-translate="serviceLearnMore">Learn More <i class="fas fa-arrow-right ml-2 text-xs" aria-hidden="true"></i></a>
                            <button class="get-checklist-btn w-full bg-blue-100 text-primary font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition-colors" data-service="Residential Cleaning" data-translate="serviceBtnChecklist">✨ Get Cleaning Checklist</button>
                        </div>
                    </article>
                    <article class="service-card bg-white p-6 rounded-xl shadow-md relative animate-fade-in-up flex flex-col justify-between" style="animation-delay: 0.4s;">
                        <div>
                            <div class="bg-gradient-to-br from-blue-100 to-blue-200 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4" aria-hidden="true"><i class="fas fa-building text-primary text-2xl"></i></div>
                            <h3 class="font-bold text-lg mb-2" data-translate="service2Title">Commercial Cleaning</h3>
                            <p class="text-sm text-gray-600 mb-4" data-translate="service2Desc">Reliable cleaning for offices and businesses of all sizes.</p>
                        </div>
                        <div class="mt-4">
                            <a href="#contact" class="text-primary hover:underline font-medium inline-flex items-center mb-3" data-translate="serviceLearnMore">Learn More <i class="fas fa-arrow-right ml-2 text-xs" aria-hidden="true"></i></a>
                            <button class="get-checklist-btn w-full bg-blue-100 text-primary font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition-colors" data-service="Commercial Cleaning" data-translate="serviceBtnChecklist">✨ Get Cleaning Checklist</button>
                        </div>
                    </article>
                    <article class="service-card bg-white p-6 rounded-xl shadow-md relative animate-fade-in-up flex flex-col justify-between" style="animation-delay: 0.5s;">
                        <div>
                            <div class="bg-gradient-to-br from-blue-100 to-blue-200 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4" aria-hidden="true"><i class="fas fa-broom text-primary text-2xl"></i></div>
                            <h3 class="font-bold text-lg mb-2" data-translate="service3Title">Deep Cleaning</h3>
                            <p class="text-sm text-gray-600 mb-4" data-translate="service3Desc">Thorough cleaning for a refreshed and healthy space.</p>
                        </div>
                        <div class="mt-4">
                            <a href="#contact" class="text-primary hover:underline font-medium inline-flex items-center mb-3" data-translate="serviceLearnMore">Learn More <i class="fas fa-arrow-right ml-2 text-xs" aria-hidden="true"></i></a>
                            <button class="get-checklist-btn w-full bg-blue-100 text-primary font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition-colors" data-service="Deep Cleaning" data-translate="serviceBtnChecklist">✨ Get Cleaning Checklist</button>
                        </div>
                    </article>
                    <article class="service-card bg-white p-6 rounded-xl shadow-md relative animate-fade-in-up flex flex-col justify-between" style="animation-delay: 0.6s;">
                        <div>
                            <div class="bg-gradient-to-br from-blue-100 to-blue-200 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4" aria-hidden="true"><i class="fas fa-truck-moving text-primary text-2xl"></i></div>
                            <h3 class="font-bold text-lg mb-2" data-translate="service4Title">Move-In/Move-Out</h3>
                            <p class="text-sm text-gray-600 mb-4" data-translate="service4Desc">Start fresh in your new place with our moving cleaning.</p>
                        </div>
                        <div class="mt-4">
                            <a href="#contact" class="text-primary hover:underline font-medium inline-flex items-center mb-3" data-translate="serviceLearnMore">Learn More <i class="fas fa-arrow-right ml-2 text-xs" aria-hidden="true"></i></a>
                            <button class="get-checklist-btn w-full bg-blue-100 text-primary font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition-colors" data-service="Move-In/Move-Out" data-translate="serviceBtnChecklist">✨ Get Cleaning Checklist</button>
                        </div>
                    </article>
                </div>
            </div>
        </section>
        
        <!-- Service Area Section -->
        <section id="service-area" class="py-16 bg-gray-50" aria-labelledby="area-heading">
             <div class="container mx-auto px-6">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div class="animate-fade-in-up">
                         <h2 id="area-heading" class="text-3xl font-bold text-primary mb-4">Proudly Serving the Rhine-Main Area</h2>
                         <p class="mb-6 text-gray-700">We provide reliable, high-quality cleaning services to homes and businesses in the following areas:</p>
                         <ul class="grid grid-cols-2 gap-2 text-gray-700">
                             <li class="flex items-center"><i class="fas fa-map-marker-alt text-secondary mr-2"></i>Bischofsheim</li>
                             <li class="flex items-center"><i class="fas fa-map-marker-alt text-secondary mr-2"></i>Mainz</li>
                             <li class="flex items-center"><i class="fas fa-map-marker-alt text-secondary mr-2"></i>Wiesbaden</li>
                             <li class="flex items-center"><i class="fas fa-map-marker-alt text-secondary mr-2"></i>Ginsheim-Gustavsburg</li>
                             <li class="flex items-center"><i class="fas fa-map-marker-alt text-secondary mr-2"></i>Rüsselsheim</li>
                             <li class="flex items-center"><i class="fas fa-map-marker-alt text-secondary mr-2"></i>And surrounding areas!</li>
                         </ul>
                         <p class="mt-4 text-sm text-gray-500">Including ZIP codes: 65474, 55116-55131, 65183-65207, and more.</p>
                    </div>
                     <div class="animate-fade-in-up rounded-xl shadow-lg overflow-hidden" style="animation-delay: 0.2s;">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d164160.0388909893!2d8.140733519398858!3d50.0213192453508!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47bd9a250c6f5d87%3A0x422d4d510db1ba0!2sMainz!5e0!3m2!1sen!2sde!4v1664456345678!5m2!1sen!2sde" 
                            width="100%" 
                            height="400" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade"
                            title="Service area map for AJK Cleaning including Mainz, Wiesbaden, and Bischofsheim">
                        </iframe>
                    </div>
                </div>
            </div>
        </section>


        <!-- Why Choose Us Section -->
        <section id="about" class="py-16 bg-white" aria-labelledby="about-heading">
            <div class="container mx-auto px-6">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div>
                        <h2 id="about-heading" class="text-3xl font-bold text-primary mb-4 animate-fade-in-up" data-translate="aboutTitle">Why Choose AJK Cleaning?</h2>
                        <p class="mb-6 text-gray-700 animate-fade-in-up" style="animation-delay: 0.2s;" data-translate="aboutP1">At AJK Cleaning Company, we are dedicated to providing premium cleaning services with a commitment to quality and community. Our team uses eco-friendly products and ensures every job meets our AJK standard of clean.</p>
                        <p class="mb-6 text-gray-700 animate-fade-in-up" style="animation-delay: 0.3s;" data-translate="aboutP2">Founded in 2022, we've grown to become one of the most trusted cleaning services in the Bischofsheim area, serving hundreds of satisfied residential and commercial clients.</p>
                        <div class="space-y-4 mt-8">
                            <div class="trust-point p-4 rounded-lg flex items-center animate-fade-in-up" style="animation-delay: 0.4s;"><i class="fas fa-shield-alt text-primary text-xl w-8 text-center" aria-hidden="true"></i><span class="font-medium text-gray-700 ml-3" data-translate="aboutPoint1">Fully Insured & Bonded</span></div>
                            <div class="trust-point p-4 rounded-lg flex items-center animate-fade-in-up" style="animation-delay: 0.5s;"><i class="fas fa-leaf text-green-600 text-xl w-8 text-center" aria-hidden="true"></i><span class="font-medium text-gray-700 ml-3" data-translate="aboutPoint2">Eco-Friendly Products</span></div>
                            <div class="trust-point p-4 rounded-lg flex items-center animate-fade-in-up" style="animation-delay: 0.6s;"><i class="fas fa-user-check text-primary text-xl w-8 text-center" aria-hidden="true"></i><span class="font-medium text-gray-700 ml-3" data-translate="aboutPoint3">Trained Professionals</span></div>
                            <div class="trust-point p-4 rounded-lg flex items-center animate-fade-in-up" style="animation-delay: 0.7s;"><i class="fas fa-thumbs-up text-green-600 text-xl w-8 text-center" aria-hidden="true"></i><span class="font-medium text-gray-700 ml-3" data-translate="aboutPoint4">Satisfaction Guaranteed</span></div>
                        </div>
                    </div>
                    <div class="animate-fade-in-up" style="animation-delay: 0.8s;">
                        <!-- 7. Performance Optimizations: lazy loading added -->
                        <img src="https://images.unsplash.com/photo-1606813907291-d86efa9b94db?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Professional cleaning team working together" class="rounded-xl shadow-lg" width="600" height="400" loading="lazy">
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="py-16 bg-gray-50">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl font-bold text-primary mb-4 animate-fade-in-up">What Our Customers Say</h2>
                <p class="text-gray-600 max-w-2xl mx-auto mb-6 animate-fade-in-up" style="animation-delay: 0.1s;">We're proud of our 5-star reputation. Here's what some of our clients have to say.</p>
                <!-- GMB Rating Display -->
                <div class="flex justify-center items-center gap-2 mb-12 animate-fade-in-up" style="animation-delay: 0.2s;">
                      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/24px-Google_%22G%22_logo.svg.png" alt="Google Logo" class="h-6">
                      <span class="font-semibold text-lg text-gray-700">Google Rating</span>
                      <div class="stars flex items-center text-yellow-500">
                          <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                      </div>
                      <span class="font-bold text-gray-800">4.9</span>
                      <span class="text-gray-500">(58 reviews)</span>
                </div>

                <div class="grid md:grid-cols-3 gap-8 mt-8">
                    <!-- Testimonial 1 -->
                    <div class="testimonial-card bg-white p-8 rounded-lg shadow-md animate-fade-in-up" style="animation-delay: 0.3s;">
                        <img src="https://placehold.co/80x80/e0e7ff/374151?text=A" class="w-20 h-20 mx-auto rounded-full -mt-16 border-4 border-white" alt="Customer avatar">
                        <div class="stars my-4">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="text-gray-600 italic">"AJK Cleaning did an amazing job on our move-out clean. The apartment was spotless and we got our full deposit back. Highly recommend!"</p>
                        <p class="mt-4 font-semibold text-primary">- Maria S. from Mainz</p>
                    </div>
                    <!-- Testimonial 2 -->
                    <div class="testimonial-card bg-white p-8 rounded-lg shadow-md animate-fade-in-up" style="animation-delay: 0.4s;">
                        <img src="https://placehold.co/80x80/e0e7ff/374151?text=B" class="w-20 h-20 mx-auto rounded-full -mt-16 border-4 border-white" alt="Customer avatar">
                        <div class="stars my-4">
                             <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="text-gray-600 italic">"Reliable, professional, and thorough. Our office has never looked better. The team is friendly and always on time. Five stars!"</p>
                        <p class="mt-4 font-semibold text-primary">- Thomas K. from Wiesbaden</p>
                    </div>
                    <!-- Testimonial 3 -->
                    <div class="testimonial-card bg-white p-8 rounded-lg shadow-md animate-fade-in-up" style="animation-delay: 0.5s;">
                        <img src="https://placehold.co/80x80/e0e7ff/374151?text=C" class="w-20 h-20 mx-auto rounded-full -mt-16 border-4 border-white" alt="Customer avatar">
                        <div class="stars my-4">
                             <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="text-gray-600 italic">"I love coming home after AJK has been there. They pay attention to the little details and use products that are safe for my kids and pets."</p>
                        <p class="mt-4 font-semibold text-primary">- Julia R. from Bischofsheim</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq" class="py-16 bg-white" aria-labelledby="faq-heading">
            <div class="container mx-auto px-6">
                <div class="text-center max-w-3xl mx-auto">
                    <h2 id="faq-heading" class="text-3xl font-bold text-primary mb-4 animate-fade-in-up" data-translate="faqTitle">Frequently Asked Questions</h2>
                    <p class="text-gray-600 mb-12 animate-fade-in-up" style="animation-delay: 0.2s;" data-translate="faqSubtitle">Have questions? We have answers. Here are some common queries we receive from our clients in the Bischofsheim area.</p>
                </div>
                <div class="max-w-3xl mx-auto space-y-4" id="faq-container">
                    <!-- FAQ items will be inserted here by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Instant Estimate Calculator -->
        <section id="calculator" class="py-16 bg-gray-50" aria-labelledby="calculator-heading">
            <div class="container mx-auto px-6 max-w-3xl">
                 <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 text-center animate-fade-in-up">
                      <h2 id="calculator-heading" class="text-3xl font-bold text-primary mb-2">Get an Instant Estimate</h2>
                      <p class="text-gray-600 mb-8">This is an estimate only. A final quote will be provided after consultation.</p>
                      
                      <div class="space-y-6 text-left">
                            <div>
                                <label for="calc-service" class="font-semibold text-gray-700">Service Type</label>
                                <select id="calc-service" class="w-full mt-2 p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                      <option value="200" data-type="residential" data-translate="service1Title">Residential Cleaning</option>
                                      <option value="300" data-type="commercial" data-translate="service2Title">Commercial Cleaning</option>
                                      <option value="350" data-type="deep-residential" data-translate="service3Title">Deep Cleaning</option>
                                      <option value="250" data-type="residential" data-translate="service4Title">Move-In/Move-Out</option>
                                </select>
                            </div>
                            
                            <!-- Residential Inputs -->
                            <div id="residential-inputs">
                                <div class="space-y-6">
                                    <div>
                                        <div class="flex justify-between items-center">
                                            <label for="calc-bedrooms" class="font-semibold text-gray-700">Bedrooms</label>
                                            <span id="bedrooms-value" class="font-bold text-primary text-lg">3</span>
                                        </div>
                                        <input type="range" id="calc-bedrooms" min="1" max="6" value="3" class="w-full mt-2">
                                    </div>
                                    <div>
                                        <div class="flex justify-between items-center">
                                            <label for="calc-bathrooms" class="font-semibold text-gray-700">Bathrooms</label>
                                            <span id="bathrooms-value" class="font-bold text-primary text-lg">2</span>
                                        </div>
                                        <input type="range" id="calc-bathrooms" min="1" max="4" value="2" class="w-full mt-2">
                                    </div>
                                </div>
                            </div>

                            <!-- Commercial Inputs -->
                            <div id="commercial-inputs" class="hidden">
                                <div class="space-y-6">
                                    <div>
                                        <div class="flex justify-between items-center">
                                            <label for="calc-sqm" class="font-semibold text-gray-700">Area (in square meters)</label>
                                            <span id="sqm-value" class="font-bold text-primary text-lg">100</span>
                                        </div>
                                        <input type="range" id="calc-sqm" min="20" max="500" value="100" step="10" class="w-full mt-2">
                                    </div>
                                    <div>
                                         <label for="calc-frequency" class="font-semibold text-gray-700">Cleaning Frequency</label>
                                         <select id="calc-frequency" class="w-full mt-2 p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                              <option value="1.0">One Time</option>
                                              <option value="0.85">Weekly</option>
                                              <option value="0.90">Bi-Weekly</option>
                                              <option value="0.95">Monthly</option>
                                         </select>
                                    </div>
                                </div>
                            </div>
                      </div>
                      
                      <div class="mt-8 text-center">
                          <p class="text-2xl font-bold text-gray-800">Estimated Price:</p>
                          <p id="estimate-result" class="text-4xl font-bold text-secondary mt-2">€250 - €300</p>
                          <p class="text-sm text-gray-500 mt-2">Based on a one-time cleaning</p>
                      </div>
                 </div>
            </div>
        </section>
        
        <!-- AI Cleaning Tip Generator Section -->
        <section id="ai-tips" class="py-16 bg-white" aria-labelledby="tip-heading">
            <div class="container mx-auto px-6">
                <div class="bg-gray-50 p-8 rounded-xl shadow-lg border border-gray-100 text-center max-w-3xl mx-auto">
                    <h2 id="tip-heading" class="text-3xl font-bold text-primary mb-4 animate-fade-in-up" data-translate="tipTitle">✨ Get a Custom Cleaning Tip</h2>
                    <p class="text-gray-600 mb-6 animate-fade-in-up" style="animation-delay: 0.2s;" data-translate="tipSubtitle">Stuck on a tough cleaning problem? Let our AI expert help you out!</p>
                    <div class="grid sm:grid-cols-2 gap-4 mb-4 animate-fade-in-up" style="animation-delay: 0.3s;">
                        <div>
                            <label for="tip-room" class="sr-only" data-translate="tipRoomLabel">Select a Room</label>
                            <select id="tip-room" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option data-translate="tipRoomKitchen">Kitchen</option>
                                <option data-translate="tipRoomBathroom">Bathroom</option>
                                <option data-translate="tipRoomLiving">Living Room</option>
                                <option data-translate="tipRoomBedroom">Bedroom</option>
                            </select>
                        </div>
                        <div>
                            <label for="tip-challenge" class="sr-only" data-translate="tipChallengeLabel">Select a Challenge</label>
                            <select id="tip-challenge" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option data-translate="tipChallengeGrime">Everyday Grime</option>
                                <option data-translate="tipChallengeGrease">Tough Grease</option>
                                <option data-translate="tipChallengeLimescale">Limescale & Hard Water</option>
                                <option data-translate="tipChallengeDust">Dust & Allergens</option>
                                <option data-translate="tipChallengePet">Pet Messes</option>
                            </select>
                        </div>
                    </div>
                    <button id="generate-tip-btn" class="bg-secondary text-white px-6 py-3 rounded-lg shadow hover:bg-secondary-dark transition-colors duration-300 w-full sm:w-auto animate-fade-in-up" style="animation-delay: 0.4s;" data-translate="tipBtnGenerate">Generate Tip</button>
                    <div id="tip-result-container" class="mt-6 text-left p-6 bg-blue-50 rounded-lg border border-blue-200 hidden opacity-0 animate-fade-in-up">
                        <div id="tip-result-loader" class="flex justify-center items-center"><div class="loader"></div></div>
                        <p id="tip-result-text" class="text-gray-800"></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-16 bg-gray-50" aria-labelledby="contact-heading">
            <div class="container mx-auto px-6 grid md:grid-cols-2 gap-12">
                <div class="animate-fade-in-up">
                    <h2 id="contact-heading" class="text-3xl font-bold text-primary mb-4" data-translate="contactTitle">Get In Touch</h2>
                    <p class="mb-6 text-gray-700" data-translate="contactSubtitle">We're here to answer any questions. Reach out for a free, no-obligation quote for your cleaning needs in Bischofsheim.</p>
                    
                    <div class="space-y-3">
                        <p class="flex items-center"><i class="fas fa-phone text-primary mr-3 w-5" aria-hidden="true"></i> <a href="tel:+4917661852286" class="hover:underline">+49 176 61852286</a></p>
                        <p class="flex items-center"><i class="fas fa-envelope text-primary mr-3 w-5" aria-hidden="true"></i> <!-- Replace Gmail with professional email --> <a href="mailto:info@ajkcleaners.de" class="hover:underline">info@ajkcleaners.de</a></p>
                        <p class="flex items-center"><i class="fas fa-map-marker-alt text-primary mr-3 w-5" aria-hidden="true"></i><a href="https://maps.app.goo.gl/95dKa1nL9D2gZ7947" target="_blank" rel="noopener noreferrer">Bahnhofstraße 5, 65474 Bischofsheim, Germany</a></p>
                        <p class="flex items-center"><i class="fas fa-clock text-primary mr-3 w-5" aria-hidden="true"></i> <span data-translate="contactHours">Mon - Sat: 8:00am - 6:00pm</span></p>
                    </div>
                    
                    <!-- 5. Google My Business Integration: Map -->
                    <div class="mt-6 rounded-lg overflow-hidden border shadow-md">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3333.3437002182854!2d8.356986576530165!3d49.99001767150799!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47bd99f5e82f18e9%3A0x40cfb0ac711244f6!2sAJK%20Cleaning%20Service!5e1!3m2!1sen!2snp!4v1758990313764!5m2!1sen!2snp" width="100%" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="AJK Cleaning Company Location Map"></iframe>
                    </div>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 animate-fade-in-up" style="animation-delay: 0.2s;">
                    <h3 class="text-2xl font-bold text-primary mb-2" data-translate="formTitle">Request a Booking or Quote</h3>
                    <!-- Urgency Element -->
                    <div class="text-sm text-center mb-6 text-secondary font-semibold">
                         <i class="fas fa-fire"></i> Booked 3 times this week!
                    </div>
                    <form id="contact-form" class="space-y-4" novalidate>
                        <div class="grid sm:grid-cols-2 gap-4">
                            <div>
                                <label for="name" class="sr-only">Name</label>
                                <input type="text" id="name" name="name" placeholder="Name *" class="form-input w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" required aria-required="true" data-translate-placeholder="formName">
                            </div>
                             <div>
                                <label for="phone" class="sr-only">Phone</label>
                                <input type="tel" id="phone" name="phone" placeholder="Phone *" class="form-input w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" required aria-required="true" data-translate-placeholder="formPhone">
                            </div>
                        </div>
                        <div>
                            <label for="email" class="sr-only">Email</label>
                            <input type="email" id="email" name="email" placeholder="Email (Optional)" class="form-input w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" data-translate-placeholder="formEmail">
                        </div>
                        <div>
                            <label for="service" class="sr-only" data-translate="formServiceLabel">Select a Service</label>
                            <select id="service" name="service" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-label="Select a service">
                                <option value="" disabled selected data-translate="formServiceSelect">Select a Service</option>
                                <option value="Residential Cleaning" data-translate="service1Title">Residential Cleaning</option>
                                <option value="Commercial Cleaning" data-translate="service2Title">Commercial Cleaning</option>
                                <option value="Deep Cleaning" data-translate="service3Title">Deep Cleaning</option>
                                <option value="Move-In/Move-Out Cleaning" data-translate="service4Title">Move-In/Move-Out</option>
                            </select>
                        </div>
                        <div class="grid sm:grid-cols-2 gap-4">
                            <div>
                                <label for="preferred-date" class="sr-only">Preferred Date</label>
                                <input type="date" id="preferred-date" name="preferred_date" class="form-input w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-label="Preferred Date">
                            </div>
                             <div>
                                <label for="preferred-time" class="sr-only">Preferred Time</label>
                                 <select id="preferred-time" name="preferred_time" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-label="Preferred Time">
                                      <option>Morning (8am-12pm)</option>
                                      <option>Afternoon (12pm-4pm)</option>
                                      <option>Flexible</option>
                                 </select>
                            </div>
                        </div>
                        <div>
                            <label for="message" class="sr-only">Message</label>
                            <textarea id="message" name="message" placeholder="Message *" rows="4" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" required aria-required="true" data-translate-placeholder="formMessage"></textarea>
                        </div>
                        <button type="submit" id="submit-btn" class="bg-secondary text-white px-6 py-3 rounded-lg shadow hover:bg-secondary-dark transition-colors duration-300 w-full font-semibold">
                            <span id="submit-text" data-translate="formBtnSubmit">Submit Request</span>
                            <span id="submit-loading" class="hidden" data-translate="formBtnSending">Sending...</span>
                        </button>
                        <div id="form-success" class="bg-green-100 text-green-700 p-3 rounded-lg mt-4 hidden" role="alert" data-translate="formSuccess">Thank you! We'll be in touch soon.</div>
                        <div id="form-error" class="bg-red-100 text-red-700 p-3 rounded-lg mt-4 hidden" role="alert" data-translate="formError">An error occurred. Please try again.</div>
                    </form>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Footer -->
    <footer class="bg-primary text-white py-12" role="contentinfo">
        <div class="container mx-auto px-6 grid md:grid-cols-4 gap-8">
            <div>
                <h4 class="font-bold text-xl mb-4" data-translate="companyName">AJK Cleaning Company</h4>
                <p class="text-blue-200" data-translate="footerDesc">Premium Cleaning Solutions for Homes and Offices in Bischofsheim</p>
            </div>
            <div>
                <h4 class="font-bold mb-4 text-lg" data-translate="footerLinksTitle">Quick Links</h4>
                <ul class="space-y-2">
                    <li><a href="#home" class="text-blue-200 hover:text-white transition-colors" data-translate="navHome">Home</a></li>
                    <li><a href="#services" class="text-blue-200 hover:text-white transition-colors" data-translate="navServices">Services</a></li>
                    <li><a href="#about" class="text-blue-200 hover:text-white transition-colors" data-translate="navAbout">About</a></li>
                    <li><a href="#testimonials" class="text-blue-200 hover:text-white transition-colors">Testimonials</a></li>
                    <li><a href="#faq" class="text-blue-200 hover:text-white transition-colors" data-translate="navFaq">FAQ</a></li>
                    <li><a href="#contact" class="text-blue-200 hover:text-white transition-colors" data-translate="navContact">Contact</a></li>
                </ul>
            </div>
            <div>
                <h4 class="font-bold mb-4 text-lg" data-translate="footerServicesTitle">Our Services</h4>
                <ul class="space-y-2">
                    <li><a href="#services" class="text-blue-200 hover:text-white transition-colors" data-translate="service1Title">Residential Cleaning</a></li>
                    <li><a href="#services" class="text-blue-200 hover:text-white transition-colors" data-translate="service2Title">Commercial Cleaning</a></li>
                    <li><a href="#services" class="text-blue-200 hover:text-white transition-colors" data-translate="service3Title">Deep Cleaning</a></li>
                </ul>
            </div>
            <div>
                <h4 class="font-bold mb-4 text-lg" data-translate="footerFollowTitle">Follow Us</h4>
                <div class="flex space-x-4">
                    <a href="https://www.facebook.com/ajkcleaning" class="bg-white/10 hover:bg-white/20 transition-colors w-10 h-10 rounded-full flex items-center justify-center" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://www.instagram.com/ajkcleaning" class="bg-white/10 hover:bg-white/20 transition-colors w-10 h-10 rounded-full flex items-center justify-center" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
        <!-- 8. Professional Email Setup -->
        <div class="text-center mt-8 pt-6 border-t border-blue-700 text-blue-200 text-sm">
             <a href="/impressum" class="hover:text-white" data-translate="footerImpressum">Impressum</a> | 
             <a href="/datenschutz" class="hover:text-white" data-translate="footerPrivacy">Datenschutz</a>
        </div>
        <div class="text-center mt-4 pt-4 text-blue-200 text-sm">
            © <span id="copyright-year">2025</span> <span data-translate="companyName">AJK Cleaning Company</span>. <span data-translate="footerRights">All rights reserved.</span>
        </div>
    </footer>

    <!-- Sticky CTA for mobile -->
    <div class="sticky-cta fixed bottom-0 left-0 right-0 bg-white shadow-lg p-3 flex justify-around items-center md:hidden z-50">
        <a href="tel:+4917661852286" class="flex items-center text-primary font-semibold px-4 py-2 text-center" data-translate="ctaCall">
            <i class="fas fa-phone mr-2" aria-hidden="true"></i> Call Now
        </a>
        <a href="#contact" class="bg-secondary text-white px-4 py-2 rounded-lg font-semibold text-center" data-translate="ctaQuote">Get Quote</a>
    </div>
    
    <!-- Chat Widget -->
    <div id="chat-widget-enhanced" class="chat-widget-enhanced">
        <button class="chat-toggle" id="chat-toggle-enhanced" type="button" aria-label="Toggle chat">
            <div class="chat-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg>
            </div>
            <div class="unread-badge" id="unread-badge" style="display:none;" aria-hidden="true">0</div>
        </button>
        
        <div class="chat-window" id="chat-window-enhanced">
            <div class="chat-header">
                <div class="chat-header-info">
                    <h3 id="chat-header-title">AJK AI Assistant ✨</h3>
                    <div class="chat-status" id="chat-status"><span>Typically replies in 2 minutes</span></div>
                </div>
                <div class="chat-header-actions">
                    <button class="chat-action-btn" id="human-handoff-btn" type="button" title="Talk to a human" aria-label="Talk to a human">
                      <i class="fas fa-user"></i>
                    </button>
                    <button class="minimize-btn" id="minimize-chat" type="button" aria-label="Minimize chat">−</button>
                    <button class="close-btn" id="close-chat" type="button" aria-label="Close chat">×</button>
                </div>
            </div>
            
            <div class="chat-messages" id="chat-messages"></div>
            
            <div class="typing-indicator" id="typing-indicator">
                <div class="typing-dots"><span></span><span></span><span></span></div>
                <span class="typing-text" id="typing-text">Alex is typing...</span>
            </div>
            
            <div class="chat-input-container">
                <div class="user-info" id="user-info">
                    <input type="text" id="user-name" placeholder="Your name" maxlength="50" required>
                    <input type="email" id="user-email" placeholder="Your email (optional)" maxlength="100">
                    <button id="save-user-info" type="button">Start Chat</button>
                </div>
                <div class="chat-input-area" id="chat-input-area" style="display: none;">
                    <input type="text" id="chat-input-enhanced" placeholder="Ask Alex a question..." maxlength="500" aria-label="Message input">
                    <button id="chat-send-enhanced" type="button" aria-label="Send message"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" /></svg></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Gemini Checklist Modal -->
    <div id="checklist-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[2000] hidden opacity-0">
        <div id="checklist-modal-content" class="bg-white rounded-lg shadow-2xl p-6 w-full max-w-lg max-h-[90vh] flex flex-col transform scale-95">
            <div class="flex justify-between items-center border-b pb-3 mb-4">
                <h2 id="checklist-modal-title" class="text-xl font-bold text-primary">Cleaning Checklist</h2>
                <button id="checklist-modal-close" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            </div>
            <div id="checklist-modal-body" class="overflow-y-auto flex-grow">
                <div id="checklist-loader" class="flex justify-center items-center py-10"><div class="loader"></div></div>
                <div id="checklist-content" class="hidden prose"></div>
                <div id="checklist-error" class="hidden text-red-600 bg-red-100 p-4 rounded-lg"></div>
            </div>
            <div class="flex justify-end items-center border-t pt-4 mt-4 space-x-3">
                <button id="checklist-modal-download" class="bg-secondary text-white font-semibold py-2 px-4 rounded-lg hover:bg-secondary-dark transition-colors hidden" data-translate="modalDownload">Download</button>
                <button id="checklist-modal-close-bottom" class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors" data-translate="modalClose">Close</button>
            </div>
        </div>
    </div>
    
    <!-- Tailwind config -->
    <script>tailwind.config={theme:{extend:{colors:{primary:'#1e40af','primary-dark':'#1e3a8a',secondary:'#059669','secondary-dark':'#047857'}}}}</script>

    <!-- Full Custom Script -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        // --- Gemini API Proxy ---
        const callGeminiAPI = async (chatHistory, systemInstruction) => {
            const apiUrl = '/api/gemini'; // Use the server's proxy endpoint
            const payload = { contents: chatHistory };
            if (systemInstruction) {
                payload.systemInstruction = systemInstruction;
            }

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (!response.ok) {
                    const errorMessage = result?.error?.message || `API error: ${response.status}`;
                    throw new Error(errorMessage);
                }
                
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                if (!text) {
                    const finishReason = result.candidates?.[0]?.finishReason;
                    if (finishReason && finishReason !== 'STOP') {
                         throw new Error(`The AI could not generate a response due to: ${finishReason}. Please try rephrasing your request.`);
                    }
                    throw new Error("No content received from AI.");
                }
                return text;

            } catch (error) {
                console.error('Error calling server-side Gemini proxy:', error);
                throw error;
            }
        };
        
        // =================================================================
        // CHAT MANAGER CLASS - Handles all chat widget functionality
        // =================================================================
        class ChatManager {
            constructor() {
                this.isOpen = false;
                this.chatHistory = []; // For AI
                this.isTyping = false;
                this.userName = localStorage.getItem('chatUserName') || 'Guest';
                this.ws = null;
                this.clientId = localStorage.getItem('chatClientId') || `client_${Date.now()}${Math.random().toString(36).substring(2, 9)}`;
                localStorage.setItem('chatClientId', this.clientId);
                
                const savedMode = localStorage.getItem('chatMode');
                if (savedMode === 'live') {
                    this.isAiActive = false;
                    this.isLiveChatActive = true;
                } else {
                    this.isAiActive = true;
                    this.isLiveChatActive = false;
                }

                this.init();
            }

            init() {
                this.attachEventListeners();
            }

            attachEventListeners() {
                document.getElementById('chat-toggle-enhanced').addEventListener('click', () => this.toggleChat());
                document.getElementById('chat-send-enhanced').addEventListener('click', () => this.sendMessage());
                document.getElementById('chat-input-enhanced').addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); this.sendMessage(); }
                });
                document.getElementById('close-chat').addEventListener('click', () => this.closeChat());
                document.getElementById('minimize-chat').addEventListener('click', () => this.closeChat());
                document.getElementById('save-user-info').addEventListener('click', () => this.saveUserInfo());
                document.getElementById('human-handoff-btn').addEventListener('click', () => this.requestHumanHandoff());
            }

            connect() {
                if (this.ws && this.ws.readyState === WebSocket.OPEN) {
                    console.log('WebSocket already connected.');
                    return;
                }

                const protocol = window.location.protocol === 'https:' ? 'wss' : 'ws';
                const wsUrl = `${protocol}://${window.location.host}?clientId=${this.clientId}`;
                
                console.log(`Connecting to WebSocket at ${wsUrl}`);
                this.ws = new WebSocket(wsUrl);

                this.ws.onopen = () => {
                    console.log('WebSocket connection established.');
                    this.displayMessage('You are connected to live support.', 'system', 'System');
                    this.sendIdentification();
                };

                this.ws.onmessage = (event) => {
                    try {
                        const data = JSON.parse(event.data);
                        console.log('Received message:', data);

                        switch(data.type) {
                            case 'chat':
                                this.displayMessage(data.message, data.isAdmin ? 'admin' : 'user', data.name);
                                break;
                            case 'history':
                                document.getElementById('chat-messages').innerHTML = ''; // Clear existing messages
                                data.messages.forEach(msg => {
                                     this.displayMessage(msg.message, msg.isAdmin ? 'admin' : 'user', msg.isAdmin ? 'Support' : this.userName);
                                });
                                this.scrollToBottom();
                                break;
                            case 'system':
                                this.displayMessage(data.message, 'system', 'System');
                                break;
                            case 'chat_reset':
                                 this.handleChatReset();
                                 break;
                        }
                    } catch (error) {
                        console.error("Error parsing incoming WebSocket message:", error);
                    }
                };
                
                this.ws.onerror = (error) => {
                    console.error('WebSocket error:', error);
                    this.displayMessage('Connection error. Please try refreshing the page.', 'system', 'System');
                };

                this.ws.onclose = () => {
                    console.log('WebSocket connection closed.');
                    if (this.isLiveChatActive) {
                        this.displayMessage('You have been disconnected. We will attempt to reconnect shortly.', 'system', 'System');
                        document.getElementById('chat-header-title').textContent = 'Live Chat - Disconnected';
                    }
                    this.ws = null;
                };
            }

            handleChatReset() {
                this.displayMessage('The chat session has been reset by an admin.', 'system', 'System');
                localStorage.setItem('chatMode', 'ai'); 
                this.isAiActive = true;
                this.isLiveChatActive = false;
                document.getElementById('human-handoff-btn').disabled = false;
                document.getElementById('chat-header-title').textContent = 'AJK AI Assistant ✨';
                
                if (this.ws && this.ws.readyState === WebSocket.OPEN) {
                    this.ws.close();
                }

                setTimeout(() => {
                     document.getElementById('chat-messages').innerHTML = '';
                     this.chatHistory = [];
                     const welcomeMessage = "Hello! I'm Alex, the AI assistant for AJK Cleaning. How can I help you today? You can ask me about our services, service areas, or for cleaning tips! 😊";
                     this.chatHistory.push({ role: 'model', parts: [{ text: welcomeMessage }]});
                     this.displayMessage(this.markdownToHtml(welcomeMessage), 'admin', 'Alex', true);
                }, 1000);
            }

            sendIdentification() {
                if (this.ws && this.ws.readyState === WebSocket.OPEN) {
                    this.ws.send(JSON.stringify({
                        type: 'identify',
                        name: this.userName,
                        email: document.getElementById('user-email').value || ''
                    }));
                }
            }
            
            markdownToHtml(markdown) {
                 if (!markdown) return '';
                 return markdown
                       .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                       .replace(/\*(.*?)\*/g, '<em>$1</em>')
                       .replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>')
                       .split('\n')
                       .map(line => line.trim())
                       .filter(line => line)
                       .map(line => {
                           if (line.startsWith('## ')) return `<h4>${line.substring(3)}</h4>`;
                           if (line.startsWith('# ')) return `<h3>${line.substring(2)}</h3>`;
                           if (line.startsWith('* ') || line.startsWith('- ')) return `<li>${line.substring(2)}</li>`;
                           return `<p>${line}</p>`;
                       })
                       .join('')
                       .replace(/<li>/g, '<ul><li>').replace(/(<\/li>(?!<li>))/g, '</li></ul>')
                       .replace(/<\/ul><ul>/g, '');
            }
            
            toggleChat() {
                this.isOpen ? this.closeChat() : this.openChat();
            }

            openChat() {
                const chatWindow = document.getElementById('chat-window-enhanced');
                chatWindow.style.display = 'flex';
                setTimeout(() => chatWindow.classList.add('open'), 10);
                this.isOpen = true;

                if (this.userName === 'Guest') {
                    document.getElementById('user-info').style.display = 'flex';
                    document.getElementById('chat-input-area').style.display = 'none';
                } else {
                    document.getElementById('user-info').style.display = 'none';
                    document.getElementById('chat-input-area').style.display = 'flex';
                }

                if (this.isLiveChatActive) {
                    document.getElementById('chat-header-title').textContent = 'Live Chat with Support';
                    document.getElementById('human-handoff-btn').disabled = true;
                    this.connect(); 
                } else if (this.isAiActive && this.chatHistory.length === 0) {
                    const welcomeMessage = "Hello! I'm Alex, the AI assistant for AJK Cleaning. How can I help you today? You can ask me about our services, service areas, or for cleaning tips! 😊";
                    this.chatHistory.push({ role: 'model', parts: [{ text: welcomeMessage }]});
                    this.displayMessage(this.markdownToHtml(welcomeMessage), 'admin', 'Alex', true);
                }
                
                this.scrollToBottom();
            }

            closeChat() {
                const chatWindow = document.getElementById('chat-window-enhanced');
                chatWindow.classList.remove('open');
                setTimeout(() => { chatWindow.style.display = 'none'; }, 300);
                this.isOpen = false;
            }

            async sendMessage() {
                const chatInput = document.getElementById('chat-input-enhanced');
                const messageText = chatInput.value.trim();
                if (!messageText || this.isTyping) return;

                this.isTyping = true;
                chatInput.value = '';
                this.displayMessage(messageText, 'user', this.userName);

                const sendButton = document.getElementById('chat-send-enhanced');
                chatInput.disabled = true;
                if (sendButton) sendButton.disabled = true;

                if (this.isAiActive) {
                    this.chatHistory.push({ role: 'user', parts: [{ text: messageText }] });
                    this.showTypingIndicator(true, 'Alex');
                    try {
                        const systemInstruction = `You are "Alex", a friendly and helpful AI assistant for AJK Cleaning Company, a professional cleaning service in Bischofsheim, Germany. Your goal is to answer user questions accurately based on the company information and encourage them to get a quote. 

                            **Company Information:**
                            - **Name:** AJK Cleaning Company
                            - **Services:** Residential Cleaning, Commercial Cleaning, Deep Cleaning, Move-In/Move-Out Cleaning.
                            - **Service Area:** Bischofsheim, Ginsheim-Gustavsburg, Mainz, Wiesbaden, and surrounding areas within a 25km radius.
                            - **Key Features:** Fully insured and bonded, uses eco-friendly products, satisfaction guaranteed, trained professionals.
                            - **Contact:** Phone: +49 176 61852286, Email: info@ajkcleaners.de
                            - **Hours:** Monday - Saturday, 8:00am - 6:00pm.
                            - **Pricing:** You cannot give exact prices. For quotes, you MUST direct users to the contact form or phone number.

                            **Your Persona & Rules:**
                            1. Be friendly, polite, and professional. Use emojis where appropriate.
                            2. Keep your answers concise and easy to understand (under 70 words).
                            3. Base your answers ONLY on the information provided.
                            4. If asked for information not listed, politely state that you don't have that detail and provide the company's contact info.
                            5. Format responses with Markdown (bolding, lists).`;
                        const botResponse = await callGeminiAPI(this.chatHistory, systemInstruction);
                        this.chatHistory.push({ role: 'model', parts: [{ text: botResponse }] });
                        this.displayMessage(this.markdownToHtml(botResponse), 'admin', 'Alex', true);
                    } catch (error) {
                        this.displayMessage(`Sorry, I'm having trouble connecting. Please try our contact form or call us directly. Error: ${error.message}`, 'admin', 'Alex');
                    } finally {
                        this.isTyping = false;
                        this.showTypingIndicator(false);
                        chatInput.disabled = false;
                        if (sendButton) sendButton.disabled = false;
                        chatInput.focus();
                    }
                } else if (this.isLiveChatActive) {
                     if (this.ws && this.ws.readyState === WebSocket.OPEN) {
                        this.ws.send(JSON.stringify({ type: 'chat', message: messageText }));
                    } else {
                        this.displayMessage('Not connected to live chat. Please wait or refresh.', 'system', 'System');
                    }
                    // For live chat, re-enable the input immediately as we don't wait for a response here
                    this.isTyping = false; 
                    chatInput.disabled = false;
                    if (sendButton) sendButton.disabled = false;
                    chatInput.focus();
                }
            }

            requestHumanHandoff() {
                if (this.isLiveChatActive) return; 

                this.isAiActive = false;
                this.isLiveChatActive = true;
                localStorage.setItem('chatMode', 'live'); 
                
                document.getElementById('human-handoff-btn').disabled = true;
                document.getElementById('chat-header-title').textContent = 'Live Chat with Support';

                this.displayMessage("You're being connected to a human agent. Please wait a moment.", 'system', 'System');
                
                // This will establish the connection. The `onopen` handler will take care of the rest.
                this.connect(); 
            }


            displayMessage(text, type, sender, isHtml = false) {
                const messagesContainer = document.getElementById('chat-messages');
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${type}-message`;
                const content = isHtml ? text : this.escapeHtml(text);
                const proseClass = (type === 'admin' && isHtml) ? 'prose' : '';
                messageDiv.innerHTML = `<div class="message-content ${proseClass}">${content}</div><div class="message-time">${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} • ${sender}</div>`;
                messagesContainer.appendChild(messageDiv);
                this.scrollToBottom();
            }
            
            showTypingIndicator(show, agentName = 'Support') {
                const indicator = document.getElementById('typing-indicator');
                if (indicator) {
                    document.getElementById('typing-text').textContent = `${agentName} is typing...`;
                    indicator.style.display = show ? 'flex' : 'none';
                    this.scrollToBottom();
                }
            }

            scrollToBottom() {
                const el = document.getElementById('chat-messages');
                if (el) el.scrollTop = el.scrollHeight;
            }

            saveUserInfo() {
                const nameInput = document.getElementById('user-name');
                const emailInput = document.getElementById('user-email');
                const name = nameInput.value.trim();
                const email = emailInput.value.trim();

                if (!name) { nameInput.style.borderColor = '#ef4444'; return; }
                this.userName = name;
                localStorage.setItem('chatUserName', name);
                if(email) localStorage.setItem('chatUserEmail', email);

                document.getElementById('user-info').style.display = 'none';
                document.getElementById('chat-input-area').style.display = 'flex';
                document.getElementById('chat-input-enhanced').focus();
            }

            escapeHtml(text) { 
                const d = document.createElement('div'); 
                d.textContent = text; 
                return d.innerHTML; 
            }
        }
        
        const chatManager = new ChatManager();
        
        // --- Multi-Language Support, Modals, Page Interactivity, etc. ---
        const translations = {
            en: {
                // Meta
                metaDescription: "AJK Cleaning Company: Professional residential & commercial cleaning services in Bischofsheim. Eco-friendly products, fully insured, satisfaction guaranteed. Free quotes!",
                metaKeywords: "cleaning service, Bischofsheim, residential cleaning, commercial cleaning, eco-friendly cleaning, move-in cleaning, deep cleaning, office cleaning mainz, house cleaning wiesbaden",
                // General
                companyName: "AJK Cleaning Company",
                skipLink: "Skip to main content",
                // Nav
                navHome: "Home", navServices: "Services", navAbout: "About", navFaq: "FAQ", navContact: "Contact", navQuote: "GET A FREE QUOTE",
                // Hero
                heroTitle: "Experience the AJK Standard of Clean in Bischofsheim",
                heroSubtitle: "Fully insured, eco-friendly products, and satisfaction guaranteed. Serving Bischofsheim, Mainz, Wiesbaden & surrounding areas.",
                heroBtnBook: "Book a Cleaning", heroBtnServices: "Our Services",
                // Trust
                trustInsured: "Insured & Bonded", trustEco: "Eco-Friendly", trustRated: "5-Star Rated", trustGuaranteed: "Satisfaction Guaranteed",
                // Services
                servicesTitle: "Our Premium Cleaning Services",
                servicesSubtitle: "We offer a wide range of cleaning services tailored to meet your specific needs and exceed your expectations in Bischofsheim and surrounding areas.",
                service1Title: "Residential Cleaning", service1Desc: "Keep your home spotless with our detailed cleaning services.",
                service2Title: "Commercial Cleaning", service2Desc: "Reliable cleaning for offices and businesses of all sizes.",
                service3Title: "Deep Cleaning", service3Desc: "Thorough cleaning for a refreshed and healthy space.",
                service4Title: "Move-In/Move-Out", service4Desc: "Start fresh in your new place with our moving cleaning.",
                serviceLearnMore: "Learn More", serviceBtnChecklist: "✨ Get Cleaning Checklist",
                // About
                aboutTitle: "Why Choose AJK Cleaning?",
                aboutP1: "At AJK Cleaning Company, we are dedicated to providing premium cleaning services with a commitment to quality and community. Our team uses eco-friendly products and ensures every job meets our AJK standard of clean.",
                aboutP2: "Founded in 2022, we've grown to become one of the most trusted cleaning services in the Bischofsheim area, serving hundreds of satisfied residential and commercial clients.",
                aboutPoint1: "Fully Insured & Bonded", aboutPoint2: "Eco-Friendly Products", aboutPoint3: "Trained Professionals", aboutPoint4: "Satisfaction Guaranteed",
                // FAQ
                faqTitle: "Frequently Asked Questions",
                faqSubtitle: "Have questions? We have answers. Here are some common queries we receive from our clients in the Bischofsheim area.",
                faq: [
                    { q: "What areas do you serve?", a: "We proudly serve Bischofsheim, Ginsheim-Gustavsburg, Mainz, Wiesbaden, and surrounding communities within a 25km radius." },
                    { q: "Are you insured and bonded?", a: "Yes, we are fully insured and bonded for your peace of mind. All our cleaning professionals are vetted and trained to the highest standards." },
                    { q: "Do you use eco-friendly products?", a: "Absolutely. We prioritize the health of your family, pets, and our planet by using high-quality, eco-friendly cleaning products that are both safe and effective." },
                    { q: "How do I get a quote?", a: "You can get a free, no-obligation quote by filling out the contact form on our website or by calling us directly at +49 176 61852286." }
                ],
                // AI Tips
                tipTitle: "✨ Get a Custom Cleaning Tip",
                tipSubtitle: "Stuck on a tough cleaning problem? Let our AI expert help you out!",
                tipRoomLabel: "Select a Room", tipChallengeLabel: "Select a Challenge",
                tipRoomKitchen: "Kitchen", tipRoomBathroom: "Bathroom", tipRoomLiving: "Living Room", tipRoomBedroom: "Bedroom",
                tipChallengeGrime: "Everyday Grime", tipChallengeGrease: "Tough Grease", tipChallengeLimescale: "Limescale & Hard Water", tipChallengeDust: "Dust & Allergens", tipChallengePet: "Pet Messes",
                tipBtnGenerate: "Generate Tip",
                // Contact
                contactTitle: "Get In Touch",
                contactSubtitle: "We're here to answer any questions. Reach out for a free, no-obligation quote for your cleaning needs in Bischofsheim.",
                contactHours: "Mon - Sat: 8:00am - 6:00pm",
                // Form
                formTitle: "Request a Booking or Quote",
                formName: "Name *", formEmail: "Email (Optional)", formPhone: "Phone *", formMessage: "Message *",
                formServiceLabel: "Select a Service", formServiceSelect: "Select a Service",
                formBtnSubmit: "Submit Request", formBtnSending: "Sending...",
                formSuccess: "Thank you! We'll be in touch soon.", formError: "An error occurred. Please try again.",
                // Footer
                footerDesc: "Premium Cleaning Solutions for Homes and Offices in Bischofsheim",
                footerLinksTitle: "Quick Links", footerServicesTitle: "Our Services", footerFollowTitle: "Follow Us",
                footerImpressum: "Impressum", footerPrivacy: "Datenschutz", footerRights: "All rights reserved.",
                // CTA
                ctaCall: "Call Now", ctaQuote: "Get Quote",
                // Modal
                modalDownload: "Download", modalClose: "Close"
            },
            de: {
                // Meta
                metaDescription: "AJK Reinigungsfirma: Professionelle Wohnungs- & Gewerbereinigung in Bischofsheim. Umweltfreundliche Produkte, voll versichert, Zufriedenheitsgarantie. Kostenloses Angebot!",
                metaKeywords: "Reinigungsfirma Bischofsheim, Gebäudereinigung Mainz, Putzfirma Wiesbaden, Hausreinigung, Büroreinigung, Umzugsreinigung, Reinigungsdienst, Reinigungsservice",
                // General
                companyName: "AJK Reinigungsfirma",
                skipLink: "Zum Hauptinhalt springen",
                // Nav
                navHome: "Startseite", navServices: "Leistungen", navAbout: "Über uns", navFaq: "FAQ", navContact: "Kontakt", navQuote: "GRATIS ANGEBOT",
                // Hero
                heroTitle: "Erleben Sie den AJK-Reinigungsstandard in Bischofsheim",
                heroSubtitle: "Voll versichert, umweltfreundliche Produkte und Zufriedenheitsgarantie. Wir bedienen Bischofsheim, Mainz, Wiesbaden & Umgebung.",
                heroBtnBook: "Reinigung buchen", heroBtnServices: "Unsere Leistungen",
                // Trust
                trustInsured: "Versichert & gebunden", trustEco: "Umweltfreundlich", trustRated: "5-Sterne-Bewertung", trustGuaranteed: "Zufriedenheitsgarantie",
                // Services
                servicesTitle: "Unsere Premium-Reinigungsdienste",
                servicesSubtitle: "Wir bieten eine breite Palette von Reinigungsdiensten an, die auf Ihre spezifischen Bedürfnisse zugeschnitten sind und Ihre Erwartungen in Bischofsheim und Umgebung übertreffen.",
                service1Title: "Wohnungsreinigung", service1Desc: "Halten Sie Ihr Zuhause mit unseren detaillierten Reinigungsdiensten makellos.",
                service2Title: "Gewerbereinigung", service2Desc: "Zuverlässige Reinigung für Büros und Unternehmen jeder Größe.",
                service3Title: "Grundreinigung", service3Desc: "Gründliche Reinigung für einen erfrischten und gesunden Raum.",
                service4Title: "Umzugsreinigung", service4Desc: "Starten Sie frisch in Ihrem neuen Zuhause mit unserer Umzugsreinigung.",
                serviceLearnMore: "Mehr erfahren", serviceBtnChecklist: "✨ Reinigungs-Checkliste erhalten",
                // About
                aboutTitle: "Warum AJK Reinigung wählen?",
                aboutP1: "Bei der AJK Reinigungsfirma widmen wir uns der Bereitstellung erstklassiger Reinigungsdienste mit einem Bekenntnis zu Qualität und Gemeinschaft. Unser Team verwendet umweltfreundliche Produkte und stellt sicher, dass jeder Auftrag unserem AJK-Reinigungsstandard entspricht.",
                aboutP2: "Gegründet im Jahr 2022, sind wir zu einem der vertrauenswürdigsten Reinigungsdienste in der Region Bischofsheim herangewachsen und bedienen Hunderte zufriedener Privat- und Geschäftskunden.",
                aboutPoint1: "Voll versichert & gebunden", aboutPoint2: "Umweltfreundliche Produkte", aboutPoint3: "Geschulte Fachkräfte", aboutPoint4: "Zufriedenheitsgarantie",
                // FAQ
                faqTitle: "Häufig gestellte Fragen",
                faqSubtitle: "Haben Sie Fragen? Wir haben Antworten. Hier sind einige häufige Anfragen, die wir von unseren Kunden im Raum Bischofsheim erhalten.",
                 faq: [
                     { q: "Welche Gebiete bedienen Sie?", a: "Wir bedienen stolz Bischofsheim, Ginsheim-Gustavsburg, Mainz, Wiesbaden und umliegende Gemeinden in einem Radius von 25 km." },
                     { q: "Sind Sie versichert und gebunden?", a: "Ja, wir sind zu Ihrer Sicherheit voll versichert und gebunden. Alle unsere Reinigungskräfte werden überprüft und auf höchstem Niveau geschult." },
                     { q: "Verwenden Sie umweltfreundliche Produkte?", a: "Absolut. Wir legen Wert auf die Gesundheit Ihrer Familie, Ihrer Haustiere und unseres Planeten, indem wir hochwertige, umweltfreundliche Reinigungsprodukte verwenden, die sowohl sicher als auch wirksam sind." },
                     { q: "Wie erhalte ich ein Angebot?", a: "Sie können ein kostenloses, unverbindliches Angebot erhalten, indem Sie das Kontaktformular auf unserer Website ausfüllen oder uns direkt unter +49 176 61852286 anrufen." }
                 ],
                // AI Tips
                tipTitle: "✨ Holen Sie sich einen individuellen Reinigungstipp",
                tipSubtitle: "Stecken Sie bei einem hartnäckigen Reinigungsproblem fest? Lassen Sie sich von unserem KI-Experten helfen!",
                tipRoomLabel: "Wählen Sie einen Raum", tipChallengeLabel: "Wählen Sie eine Herausforderung",
                tipRoomKitchen: "Küche", tipRoomBathroom: "Badezimmer", tipRoomLiving: "Wohnzimmer", tipRoomBedroom: "Schlafzimmer",
                tipChallengeGrime: "Alltäglicher Schmutz", tipChallengeGrease: "Hartnäckiges Fett", tipChallengeLimescale: "Kalk & hartes Wasser", tipChallengeDust: "Staub & Allergene", tipChallengePet: "Haustier-Schmutz",
                tipBtnGenerate: "Tipp generieren",
                // Contact
                contactTitle: "Kontakt aufnehmen",
                contactSubtitle: "Wir sind hier, um alle Fragen zu beantworten. Kontaktieren Sie uns für ein kostenloses, unverbindliches Angebot für Ihre Reinigungsbedürfnisse in Bischofsheim.",
                contactHours: "Mo - Sa: 8:00 - 18:00 Uhr",
                // Form
                formTitle: "Buchung oder Angebot anfragen",
                formName: "Name *", formEmail: "E-Mail (Optional)", formPhone: "Telefon *", formMessage: "Nachricht *",
                formServiceLabel: "Leistung auswählen", formServiceSelect: "Leistung auswählen",
                formBtnSubmit: "Anfrage senden", formBtnSending: "Senden...",
                formSuccess: "Vielen Dank! Wir werden uns bald bei Ihnen melden.", formError: "Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.",
                // Footer
                footerDesc: "Premium-Reinigungslösungen für Haushalte und Büros in Bischofsheim",
                footerLinksTitle: "Schnell-Links", footerServicesTitle: "Unsere Leistungen", footerFollowTitle: "Folgen Sie uns",
                footerImpressum: "Impressum", footerPrivacy: "Datenschutz", footerRights: "Alle Rechte vorbehalten.",
                // CTA
                ctaCall: "Jetzt anrufen", ctaQuote: "Angebot anfordern",
                // Modal
                modalDownload: "Herunterladen", modalClose: "Schließen"
            }
        };

        const setLanguage = (lang) => {
            if (!translations[lang]) return;
            document.documentElement.lang = lang;
            localStorage.setItem('preferredLanguage', lang);
            document.querySelector('meta[name="description"]').setAttribute('content', translations[lang].metaDescription);
            document.querySelector('meta[name="keywords"]').setAttribute('content', translations[lang].metaKeywords);
            document.querySelectorAll('[data-translate]').forEach(el => {
                const key = el.dataset.translate;
                if (translations[lang][key]) el.innerHTML = translations[lang][key];
            });
            document.querySelectorAll('[data-translate-placeholder]').forEach(el => {
                const key = el.dataset.translatePlaceholder;
                if (translations[lang][key]) el.placeholder = translations[lang][key];
            });
            renderFaq(lang);
            document.querySelectorAll('.lang-switcher button').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            if (typeof gtag === 'function') {
                gtag('event', 'language_switch', { 'event_category': 'Engagement', 'event_label': lang });
            }
        };

        const renderFaq = (lang) => {
            const faqContainer = document.getElementById('faq-container');
            if (faqContainer && translations[lang] && translations[lang].faq) {
                faqContainer.innerHTML = '';
                translations[lang].faq.forEach((item, index) => {
                    const faqItem = document.createElement('div');
                    faqItem.className = 'faq-item bg-white p-5 rounded-lg shadow-sm border border-gray-200 animate-fade-in-up';
                    faqItem.style.animationDelay = `${0.3 + index * 0.1}s`;
                    faqItem.innerHTML = `<div class="faq-question flex justify-between items-center font-semibold text-gray-800"><p>${item.q}</p><i class="fas fa-chevron-down faq-icon text-primary"></i></div><div class="faq-answer text-gray-600 pt-3">${item.a}</div>`;
                    faqContainer.appendChild(faqItem);
                });
            }
        };
        
        document.querySelectorAll('.lang-switcher button').forEach(btn => {
            btn.addEventListener('click', () => setLanguage(btn.dataset.lang));
        });

        // --- Checklist Modal ---
        const checklistModal = document.getElementById('checklist-modal');
        const checklistModalContent = document.getElementById('checklist-modal-content');
        const checklistModalTitle = document.getElementById('checklist-modal-title');
        const checklistModalClose = document.getElementById('checklist-modal-close');
        const checklistModalCloseBottom = document.getElementById('checklist-modal-close-bottom');
        const checklistModalDownload = document.getElementById('checklist-modal-download');
        const checklistLoader = document.getElementById('checklist-loader');
        const checklistContent = document.getElementById('checklist-content');
        const checklistError = document.getElementById('checklist-error');
        let currentChecklistText = "";

        const createChecklistPrompt = (serviceName) => {
             const lang = document.documentElement.lang || 'en';
             return `Act as a professional cleaning expert from AJK Cleaning Company. Generate a comprehensive cleaning checklist for a typical '${serviceName}' service, in ${lang === 'de' ? 'German' : 'English'}. The checklist should be well-organized, easy to follow, and formatted in Markdown with headings (like '# Kitchen') and bullet points (like '* Wipe countertops').`;
        }

        const openChecklistModal = (serviceName) => {
            checklistModalTitle.textContent = `${serviceName} Checklist`;
            checklistContent.classList.add('hidden');
            checklistError.classList.add('hidden');
            checklistLoader.style.display = 'flex';
            checklistModalDownload.classList.add('hidden');
            checklistModal.classList.remove('hidden');
            setTimeout(() => checklistModal.classList.remove('opacity-0'), 10);
            setTimeout(() => checklistModalContent.classList.remove('scale-95'), 10);
            generateChecklist(serviceName);
        };

        const closeChecklistModal = () => {
            checklistModal.classList.add('opacity-0');
            checklistModalContent.classList.add('scale-95');
            setTimeout(() => checklistModal.classList.add('hidden'), 300);
        };

        const generateChecklist = async (serviceName) => {
            const prompt = createChecklistPrompt(serviceName);
            try {
                const text = await callGeminiAPI([{ role: 'user', parts: [{ text: prompt }] }]);
                currentChecklistText = text;
                checklistContent.innerHTML = chatManager.markdownToHtml(text);
                checklistLoader.style.display = 'none';
                checklistContent.classList.remove('hidden');
                checklistModalDownload.classList.remove('hidden');
            } catch (error) {
                console.error("Gemini API call failed:", error.message);
                checklistLoader.style.display = 'none';
                checklistError.innerHTML = `Sorry, we couldn't generate the checklist. <br><small class="text-gray-500">Reason: ${error.message}</small>`;
                checklistError.classList.remove('hidden');
            }
        };

        document.querySelectorAll('.get-checklist-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const serviceName = e.target.dataset.service;
                openChecklistModal(serviceName);
            });
        });

        checklistModalClose.addEventListener('click', closeChecklistModal);
        checklistModalCloseBottom.addEventListener('click', closeChecklistModal);
        checklistModal.addEventListener('click', (e) => {
            if (e.target === checklistModal) closeChecklistModal();
        });
        checklistModalDownload.addEventListener('click', () => {
            const blob = new Blob([currentChecklistText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            const serviceName = checklistModalTitle.textContent.replace(' Checklist', '').toLowerCase().replace(/ /g, '_');
            a.href = url;
            a.download = `${serviceName}_checklist.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });

        // --- AI Cleaning Tip Generator ---
        const generateTipBtn = document.getElementById('generate-tip-btn');
        const tipResultContainer = document.getElementById('tip-result-container');
        const tipResultLoader = document.getElementById('tip-result-loader');
        const tipResultText = document.getElementById('tip-result-text');

        generateTipBtn.addEventListener('click', async () => {
            const room = document.getElementById('tip-room').value;
            const challenge = document.getElementById('tip-challenge').value;
            const lang = document.documentElement.lang || 'en';
            tipResultContainer.classList.remove('hidden');
            setTimeout(() => tipResultContainer.classList.remove('opacity-0'), 10);
            tipResultText.classList.add('hidden');
            tipResultLoader.style.display = 'flex';
            const prompt = `You are a friendly cleaning expert from AJK Cleaning Company in Germany. Provide a quick, eco-friendly cleaning tip in ${lang === 'de' ? 'German' : 'English'} for tackling "${challenge}" in a "${room}". Keep it under 50 words and make it easy to follow.`;
            try {
                const text = await callGeminiAPI([{ role: 'user', parts: [{ text: prompt }] }]);
                tipResultLoader.style.display = 'none';
                tipResultText.textContent = text;
                tipResultText.classList.remove('hidden');
            } catch(error) {
                tipResultLoader.style.display = 'none';
                tipResultText.innerHTML = `Sorry, could not generate a tip. Error: ${error.message}`;
                tipResultText.classList.remove('hidden');
            }
        });
        
        // --- Calculator Logic ---
        const calcService = document.getElementById('calc-service');
        const residentialInputs = document.getElementById('residential-inputs');
        const commercialInputs = document.getElementById('commercial-inputs');
        const calcBedrooms = document.getElementById('calc-bedrooms');
        const bedroomsValue = document.getElementById('bedrooms-value');
        const calcBathrooms = document.getElementById('calc-bathrooms');
        const bathroomsValue = document.getElementById('bathrooms-value');
        const calcSqm = document.getElementById('calc-sqm');
        const sqmValue = document.getElementById('sqm-value');
        const calcFrequency = document.getElementById('calc-frequency');
        const estimateResult = document.getElementById('estimate-result');

        function updateEstimate() {
            const selectedOption = calcService.options[calcService.selectedIndex];
            const serviceType = selectedOption.dataset.type;
            const serviceBase = parseInt(selectedOption.value);
            
            // Show/hide relevant inputs based on service type
            if (serviceType === 'commercial') {
                residentialInputs.classList.add('hidden');
                commercialInputs.classList.remove('hidden');
            } else { // residential or deep-residential
                residentialInputs.classList.remove('hidden');
                commercialInputs.classList.add('hidden');
            }

            let price = serviceBase;

            // Calculate price based on visible inputs
            if (serviceType === 'commercial') {
                const sqm = parseInt(calcSqm.value);
                const frequencyMultiplier = parseFloat(calcFrequency.value);
                sqmValue.textContent = sqm;
                // Commercial pricing logic
                price += (sqm * 1.5); // Example: €1.5 per sqm
                price *= frequencyMultiplier;
            } else {
                const numBedrooms = parseInt(calcBedrooms.value);
                const numBathrooms = parseInt(calcBathrooms.value);
                bedroomsValue.textContent = numBedrooms;
                bathroomsValue.textContent = numBathrooms;
                // Residential pricing logic
                price += (numBedrooms * 25) + (numBathrooms * 35);
            }
            
            const lowerBound = Math.round(price * 0.9 / 5) * 5;
            const upperBound = Math.round(price * 1.1 / 5) * 5;

            estimateResult.textContent = `€${lowerBound} - €${upperBound}`;
        }

        // Add event listeners to all calculator inputs
        [calcService, calcBedrooms, calcBathrooms, calcSqm, calcFrequency].forEach(el => {
            const eventType = el.tagName === 'SELECT' ? 'change' : 'input';
            el.addEventListener(eventType, updateEstimate);
        });
        
        // --- Page Interactivity ---
        document.getElementById('copyright-year').textContent = new Date().getFullYear();
        document.getElementById('faq-container').addEventListener('click', (e) => {
            const question = e.target.closest('.faq-question');
            if (question) { question.parentElement.classList.toggle('open'); }
        });
        const menuBtn = document.getElementById('menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        menuBtn.addEventListener('click', () => {
            const isExpanded = menuBtn.getAttribute('aria-expanded') === 'true';
            mobileMenu.classList.toggle('open');
            menuBtn.classList.toggle('menu-open');
            menuBtn.setAttribute('aria-expanded', !isExpanded);
            mobileMenu.setAttribute('aria-hidden', isExpanded);
        });
        document.querySelectorAll('#mobile-menu a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.remove('open');
                menuBtn.classList.remove('menu-open');
                menuBtn.setAttribute('aria-expanded', 'false');
                mobileMenu.setAttribute('aria-hidden', 'true');
            });
        });
        const navbar = document.getElementById('navbar');
        const navLinks = document.querySelectorAll('.nav-link, #mobile-menu a[href^="#"]');
        window.addEventListener('scroll', () => {
            window.scrollY > 50 ? navbar.classList.add('navbar-scrolled') : navbar.classList.remove('navbar-scrolled');
            let currentSection = "";
            document.querySelectorAll('section').forEach(section => {
                if (section.offsetTop <= window.scrollY + 150) {
                    currentSection = section.getAttribute('id');
                }
            });
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href').substring(1) === currentSection) {
                    link.classList.add('active');
                }
            });
        });

        // --- Contact Form ---
        const contactForm = document.getElementById('contact-form');
        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitBtn = document.getElementById('submit-btn');
            const submitText = document.getElementById('submit-text');
            const submitLoading = document.getElementById('submit-loading');
            const formSuccess = document.getElementById('form-success');
            const formError = document.getElementById('form-error');
            
            submitText.classList.add('hidden');
            submitLoading.classList.remove('hidden');
            submitBtn.disabled = true;
            formSuccess.classList.add('hidden');
            formError.classList.add('hidden');

            const formData = new FormData(contactForm);
            const data = Object.fromEntries(formData.entries());

            try {
                const response = await fetch('/api/form/submit', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (!response.ok) {
                    throw new Error(result.error || 'Form submission failed');
                }

                formSuccess.classList.remove('hidden');
                contactForm.reset();
                updateEstimate(); // Reset calculator display
                setTimeout(() => formSuccess.classList.add('hidden'), 5000);

            } catch (error) {
                console.error('Form submission error:', error);
                formError.textContent = error.message || 'An error occurred. Please try again.';
                formError.classList.remove('hidden');
                setTimeout(() => formError.classList.add('hidden'), 5000);
            } finally {
                submitText.classList.remove('hidden');
                submitLoading.classList.add('hidden');
                submitBtn.disabled = false;
            }
        });
        
        // --- Initial Load ---
        const userLang = localStorage.getItem('preferredLanguage') || navigator.language.split('-')[0];
        setLanguage(translations[userLang] ? userLang : 'en');
        updateEstimate(); // Initial calculator run
    });
    </script>
    <!-- ANALYTICS TRACKING SCRIPT -->
    <script>
      (function() {
        // Function to generate or retrieve a unique session ID for the user
        function getAnalyticsSessionId() {
          let sessionId = sessionStorage.getItem('ajkAnalyticsSessionId');
          if (!sessionId) {
            sessionId = `session_${Date.now()}_${Math.random().toString(36).substring(2, 11)}`;
            sessionStorage.setItem('ajkAnalyticsSessionId', sessionId);
          }
          return sessionId;
        }

        // Function to send tracking data to the backend
        async function trackEvent(eventType, eventData = {}) {
          const payload = {
            eventType: eventType,
            path: window.location.pathname,
            referrer: document.referrer || 'direct',
            sessionId: getAnalyticsSessionId(),
            ...eventData
          };

          try {
            // Use navigator.sendBeacon if available for reliability, otherwise fallback to fetch
            if (navigator.sendBeacon) {
              const blob = new Blob([JSON.stringify(payload)], { type: 'application/json' });
              navigator.sendBeacon('/api/analytics/track', blob);
            } else {
              await fetch('/api/analytics/track', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload),
                keepalive: true 
              });
            }
          } catch (error) {
            console.error('Analytics tracking failed:', error);
          }
        }

        // Track the initial pageview when the script loads
        trackEvent('pageview');
      })();
    </script>
</body>
</html>

